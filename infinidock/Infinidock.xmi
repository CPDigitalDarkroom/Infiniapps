
#define IFConfigurationListClass SBDockIconListView
#define IFConfigurationExpandHorizontally YES
#define IFConfigurationExpandVertically NO
#define IFConfigurationDynamicColumns YES

#import "infinishared/Infinilist.h"
#import "infinishared/Preferences.h"

%group IFInfinidock

%end

/* Constructor {{{ */

__attribute__((constructor)) static void infinidock_init() {
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    dlopen("/Library/MobileSubstrate/DynamicLibraries/_iPhoneRotator.dylib", RTLD_LAZY);

    IFPreferencesInitialize(@"com.chpwn.infinidock", IFPreferencesApply);

    dlopen("/Library/MobileSubstrate/DynamicLibraries/IconSupport.dylib", RTLD_LAZY);
    [[objc_getClass("ISIconSupport") sharedInstance] addExtension:@"infinidock"];

    %init(IFBasic);
    %init(IFInfinidock);

    [pool release];
}

/* }}} */

